// ğŸ“ Plugins/events/hourlyReminder.js

import moment from "moment-timezone";

const schedule = {
  0: "ğŸŒ™ {Ø§Ù„Ø³Ø§Ø¹Ø© 12 ØµØ¨Ø§Ø­Ù‹Ø§} Ø§Ø³ØªØºÙØ± Ø±Ø¨Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… ÙˆÙ‚Ù„: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù„ÙŠ Ù…Ù† Ø£Ù…Ø±ÙŠ ÙØ±Ø¬Ù‹Ø§.",
  1: "ğŸ• {Ø§Ù„Ø³Ø§Ø¹Ø© 1 ØµØ¨Ø§Ø­Ù‹Ø§} Ø¯Ø¹Ø§Ø¡ Ø¬Ù…ÙŠÙ„: Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ Ø¹Ù„ÙŠÙ‡ ØªÙˆÙƒÙ„Øª ÙˆÙ‡Ùˆ Ø±Ø¨ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ø¹Ø¸ÙŠÙ….",
  2: "ğŸ•‘ {Ø§Ù„Ø³Ø§Ø¹Ø© 2 ØµØ¨Ø§Ø­Ù‹Ø§} Ù„Ø§ ØªÙ†Ø³ Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„ØŒ ÙˆÙ„Ùˆ Ø¨Ø±ÙƒØ¹ØªÙŠÙ† ÙˆØµÙ„Ø§Ø© Ø§Ù„ÙˆØªØ± ğŸ’«",
  3: "ğŸ•’ {Ø§Ù„Ø³Ø§Ø¹Ø© 3 ØµØ¨Ø§Ø­Ù‹Ø§} Ø§Ù„Ø«Ù„Ø« Ø§Ù„Ø£Ø®ÙŠØ± Ù…Ù† Ø§Ù„Ù„ÙŠÙ„ØŒ Ø§Ø³ØªØºÙØ± ÙˆØ§Ø¯Ø¹Ù ÙØ¥Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù…Ø³ØªØ¬Ø§Ø¨ ğŸŒ™",
  4: "ğŸ•“ {Ø§Ù„Ø³Ø§Ø¹Ø© 4 ØµØ¨Ø§Ø­Ù‹Ø§} Ø§Ù‚ØªØ±Ø¨ Ø§Ù„ÙØ¬Ø±ØŒ ØªÙˆØ¶Ø£ ÙˆØ§Ø³ØªØ¹Ø¯ Ù„ÙˆÙ‚ÙˆÙÙƒ Ø¨ÙŠÙ† ÙŠØ¯ÙŠ Ø§Ù„Ù„Ù‡ ğŸŒ„",
  5: "ğŸŒ… {Ø§Ù„Ø³Ø§Ø¹Ø© 5 ØµØ¨Ø§Ø­Ù‹Ø§} Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ğŸŒ: Ù‚Ù„ 'Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡'",
  6: "ğŸ•• {Ø§Ù„Ø³Ø§Ø¹Ø© 6 ØµØ¨Ø§Ø­Ù‹Ø§} Ø±Ø¯Ø¯: Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø®ÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…ØŒ ÙØªØ­Ù‡ ÙˆÙ†ØµØ±Ù‡ ğŸŒ¼",
  7: "ğŸ•– {Ø§Ù„Ø³Ø§Ø¹Ø© 7 ØµØ¨Ø§Ø­Ù‹Ø§} Ù„Ø§ ØªÙ†Ø³Ù Ù†ÙŠØ© ØµØ§Ù„Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…ØŒ ÙÙ€Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¨Ø§Ù„Ù†ÙŠØ§Øª âœ¨",
  8: "ğŸ•— {Ø§Ù„Ø³Ø§Ø¹Ø© 8 ØµØ¨Ø§Ø­Ù‹Ø§} Ø±Ø¯Ø¯: Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ğŸ’¬",
  9: "ğŸ•˜ {Ø§Ù„Ø³Ø§Ø¹Ø© 9 ØµØ¨Ø§Ø­Ù‹Ø§} ØªØ°ÙƒÙŠØ±: ØµÙ„Ù Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŒ ØªÙØªØ­ Ù„Ùƒ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ â¤ï¸",
  10: "ğŸ•™ {Ø§Ù„Ø³Ø§Ø¹Ø© 10 ØµØ¨Ø§Ø­Ù‹Ø§} Ù‚Ù„: Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡ØŒ ÙƒÙ†Ø² Ù…Ù† ÙƒÙ†ÙˆØ² Ø§Ù„Ø¬Ù†Ø©",
  11: "ğŸ•š {Ø§Ù„Ø³Ø§Ø¹Ø© 11 ØµØ¨Ø§Ø­Ù‹Ø§} Ø£ÙƒØ«Ø± Ù…Ù† Ù‚ÙˆÙ„: Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ğŸŒ¿",
  12: "ğŸ•› {Ø§Ù„Ø³Ø§Ø¹Ø© 12 Ø¸Ù‡Ø±Ù‹Ø§} ØªØ¬Ù‡Ù‘Ø² Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±ØŒ ÙØ§Ù„ØµÙ„Ø§Ø© Ø¹Ù…Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙ† ğŸ•Œ",
  13: "ğŸ• {Ø§Ù„Ø³Ø§Ø¹Ø© 1 Ø¸Ù‡Ø±Ù‹Ø§} Ù‚Ù„: ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ« ğŸ™",
  14: "ğŸ•‘ {Ø§Ù„Ø³Ø§Ø¹Ø© 2 Ø¸Ù‡Ø±Ù‹Ø§} Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª Ø°ÙƒØ±Ù‹Ø§ ÙˆØ§Ø³ØªØºÙØ§Ø±Ù‹Ø§ ğŸ’­",
  15: "ğŸ•’ {Ø§Ù„Ø³Ø§Ø¹Ø© 3 Ø¹ØµØ±Ù‹Ø§} ØªØ°ÙƒÙŠØ± Ø¨ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±ØŒ Ù„Ø§ ØªØ¤Ø®Ø±Ù‡Ø§ ğŸŒ‡",
  16: "ğŸ•“ {Ø§Ù„Ø³Ø§Ø¹Ø© 4 Ø¹ØµØ±Ù‹Ø§} Ø±Ø¯Ø¯: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„ØªÙˆØ§Ø¨ÙŠÙ† ğŸ’§",
  17: "ğŸ•” {Ø§Ù„Ø³Ø§Ø¹Ø© 5 Ù…Ø³Ø§Ø¡Ù‹} ÙˆÙ‚Øª Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡ØŒ Ù„Ø§ ØªÙ†Ø³Ù ØªØ­ØµÙŠÙ† Ù†ÙØ³Ùƒ ğŸ’ ",
  18: "ğŸŒ† {Ø§Ù„Ø³Ø§Ø¹Ø© 6 Ù…Ø³Ø§Ø¡Ù‹} Ù‚Ù„: Ø£Ø¹ÙˆØ° Ø¨ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù„Ù‡ Ø§Ù„ØªØ§Ù…Ø§Øª Ù…Ù† Ø´Ø± Ù…Ø§ Ø®Ù„Ù‚ ğŸ•¯ï¸",
  19: "ğŸ•– {Ø§Ù„Ø³Ø§Ø¹Ø© 7 Ù…Ø³Ø§Ø¡Ù‹} Ø§Ø¯Ø¹Ù: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø¡ Ù‡Ø¯ÙˆØ¡Ù‹Ø§ Ù„Ù‚Ù„ÙˆØ¨Ù†Ø§ ğŸŒ™",
  20: "ğŸ•— {Ø§Ù„Ø³Ø§Ø¹Ø© 8 Ù…Ø³Ø§Ø¡Ù‹} Ù„Ùˆ Ø§Ù„ÙŠÙˆÙ… Ø¬Ù…Ø¹Ø©ØŒ Ø§Ù‚Ø±Ø£ Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ğŸ•Œ",
  21: "ğŸ•˜ {Ø§Ù„Ø³Ø§Ø¹Ø© 9 Ù…Ø³Ø§Ø¡Ù‹} Ø§Ø³ØªØ¹Ø¯ Ù„Ù„Ù†ÙˆÙ…: Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ 33ØŒ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ 33ØŒ Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± 34",
  22: "ğŸŒ™ {Ø§Ù„Ø³Ø§Ø¹Ø© 10 Ù…Ø³Ø§Ø¡Ù‹} Ù„Ø­Ø¸Ø© Ù‡Ø¯ÙˆØ¡: Ù‚Ù„ 'Ø§Ù„Ù„Ù‡Ù… Ø¢ØªÙ†Ø§ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø­Ø³Ù†Ø©' ğŸ¤²",
  23: "ğŸ•š {Ø§Ù„Ø³Ø§Ø¹Ø© 11 Ù…Ø³Ø§Ø¡Ù‹} Ø§ØºÙ„Ù‚ ÙŠÙˆÙ…Ùƒ Ø¨Ø¯Ø¹Ø§Ø¡: Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ ÙÙˆØ¶Øª Ø£Ù…Ø±ÙŠ Ø¥Ù„ÙŠÙƒ âœ¨"
};

let sentHour = null;

function onStart({ api }) {
  // âœ… Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
  console.log("âœ… Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª ØªÙ… ØªÙØ¹ÙŠÙ„Ù‡ ÙˆØ³ÙŠØ¹Ù…Ù„ Ø­Ø³Ø¨ ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†.");

  // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·ÙˆØ± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  const adminID = "61562119538523"; // Ø¹Ø¯Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø¢ÙŠØ¯ÙŠ Ù…Ø®ØªÙ„Ù
  api.sendMessage(
    "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø³Ø§Ø¹Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø­Ø³Ø¨ ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†.\nğŸ’¡ Ù„Ù„ØªØ¹Ø·ÙŠÙ„ ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø¹ÙŠÙ†Ø© Ø§Ø³ØªØ®Ø¯Ù…: 'Ø§Ù„ØªØ°ÙƒÙŠØ± Ø¥ÙŠÙ‚Ø§Ù'",
    adminID
  );

  setInterval(() => {
    const hour = moment().tz("Africa/Khartoum").hour();

    if (hour === sentHour) return;
    sentHour = hour;

    const msg = schedule[hour];
    if (!msg) return;

    const threads = global.data.threads || new Map();
    for (const [threadID, thread] of threads) {
      if (thread?.data?.dailyNoti === false) continue;
      api.sendMessage(msg, threadID);
    }
  }, 1000 * 60 * 3); // ÙØ­Øµ ÙƒÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚
}

export default {
  onStart
};
